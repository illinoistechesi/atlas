!function e(a,t,o){function n(i,s){if(!t[i]){if(!a[i]){var c="function"==typeof require&&require;if(!s&&c)return c(i,!0);if(r)return r(i,!0);var l=new Error("Cannot find module '"+i+"'");throw l.code="MODULE_NOT_FOUND",l}var m=t[i]={exports:{}};a[i][0].call(m.exports,function(e){var t=a[i][1][e];return n(t||e)},m,m.exports,e,a,t,o)}return t[i].exports}for(var r="function"==typeof require&&require,i=0;i<o.length;i++)n(o[i]);return n}({1:[function(e,a,t){"use strict";var o={apiKey:"AIzaSyA9EYUXVL5WAh6Aam1qXlWyvi3b7HLcZ1U",authDomain:"esigamma.firebaseapp.com",databaseURL:"https://esigamma.firebaseio.com",projectId:"esigamma",storageBucket:"esigamma.appspot.com",messagingSenderId:"73416363603"},n=firebase.initializeApp(o,"Atlas").database(),r=function(e){e=e.split("+").join(" ");for(var a,t={},o=/[?&]?([^=]+)=([^&]*)/g;a=o.exec(e);)t[decodeURIComponent(a[1])]=decodeURIComponent(a[2]);return t}(document.location.search),i=Atlas();i.init().then(function(e){var a={zoom:15,center:new google.maps.LatLng(41.259716,-95.960588),styles:i.removeThemeLabels(MAP_STYLES)},t=document.getElementById("map"),o=new google.maps.Map(t,a);window.mapRef=o,i.setMap(o);var s=localStorage.getItem("map-theme-tag"),c=localStorage.getItem("map-theme-style");if(s&&c){var l=JSON.parse(c);i.changeMapStyle(o,s,l)}var m=document.getElementById("shortcuts-list");document.getElementById("shortcuts").addEventListener("click",function(e){var a=document.createElement("div");a.innerHTML=m.innerHTML,vex.dialog.alert({unsafeMessage:a.outerHTML})}),r.code?n.ref("atlas/saved/"+r.code).once("value",function(e){var a=e.val();a?(i.loadMapFromData(o,a),vex.dialog.alert({message:"Loaded map data saved at code: "+r.code+"."})):vex.dialog.alert({message:"No map data saved with code: "+r.code+"."})}).catch(function(e){vex.dialog.alert({message:"Could not find a saved map with code: "+r.code+"."})}):vex.dialog.prompt({message:"Enter map data:",callback:function(e){e&&(window.storedMapData=e,i.loadMapFromData(o,e))}}),i.setHotKey("t",function(e){vex.dialog.prompt({message:"Enter map theme URL:",callback:function(e){i.getMapStyleByURL(e).then(function(e){localStorage.setItem("map-theme-tag",e.name),localStorage.setItem("map-theme-style",e.json);var a=e.name,t=JSON.parse(e.json);i.changeMapStyle(o,a,t),vex.dialog.alert("Changed map theme to: "+a)}).catch(function(e){vex.dialog.alert("Error: "+e)})}})}),i.setHotKey("l",function(e){vex.dialog.prompt({message:"Enter map data:",callback:function(e){e&&(window.storedMapData=e,i.loadMapFromData(o,e))}})}),i.setHotKey("s",function(e){var a=window.storedMapData;a?vex.dialog.prompt({message:"Choose a code to save your map with.",callback:function(e){if(e){var t=n.ref("atlas/saved/"+e);t.once("value",function(o){if(o.val())vex.dialog.confirm({message:"There is already a map saved with code: "+e+". Do you want to replace it?",callback:function(o){if(o){var n=t.set(a);d(n,e)}}});else{var n=t.set(a);d(n,e)}})}}}):vex.dialog.alert("There is no map data to save.")});var d=function(e,a){e.then(function(e){var t="illinoistechesi.github.io/atlas/view?code="+a;vex.dialog.prompt({message:"Share your map with this link:",value:t,callback:function(){}})}).catch(function(e){vex.dialog.alert("Something went wrong: "+e+".")})}})},{}]},{},[1]);
//# sourceMappingURL=maps/view.js.map
